<?xml version="1.0"?>

<!--
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this file,
You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<Component
    Name="NetworkFPC"
    Namespace="FirstPersonController"
    OverrideComponent="true"
    OverrideController="true"
    OverrideInclude="Multiplayer/NetworkFPC.h"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <ComponentRelation Constraint="Required" HasController="true" Name="NetworkCharacterComponent" Namespace="Multiplayer" Include="Multiplayer/Components/NetworkCharacterComponent.h"/>

    <NetworkProperty Type="bool" Name="EnableNetworkFPC"
                     Init="true" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="false"
                     IsPredictable="false" IsPublic="true"
                     Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Determines whether NetworkFPC is enabled or disabled."/>
    <NetworkProperty Type="AZ::u64" Name="ServerFPCEntityId"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="false"
                     IsPredictable="false" IsPublic="true"
                     Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Used to get the server's EntityId of the FPC entity."/>
    <NetworkProperty Type="bool" Name="IsNetBot"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="false"
                     IsPredictable="false" IsPublic="true"
                     Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Determines whether the FPC entity is an AI bot, true by default in FPC, set to false when autonomous."/>
    <NetworkProperty Type="AZ::Vector3" Name="LookRotationDelta"
                     Init="AZ::Vector3::CreateZero()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The euler angle change in the character and camera rotation in radians."/>
    <NetworkProperty Type="AZ::Quaternion" Name="LookRotationDeltaQuat"
                     Init="AZ::Quaternion::CreateZero()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The quaternion change in the character and camera rotation."/>
    <NetworkProperty Type="float" Name="YawDeltaOvershoot"
                     Init="0.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="false" GenerateEventBindings="true"
                     Description="The amount the camera's yaw overshot the character."/>
    <NetworkProperty Type="AZ::Vector3" Name="DesiredVelocity"
                     Init="AZ::Vector3::CreateZero()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The desired velocity of the character entity."/>
    <NetworkProperty Type="AZ::Vector2" Name="ApplyVelocityXY"
                     Init="AZ::Vector2::CreateZero()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The local XY velocity that is ultimately used in calculating DesiredVelocity."/>
    <NetworkProperty Type="float" Name="ApplyVelocityZ"
                     Init="0.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="false" GenerateEventBindings="true"
                     Description="The local Z velocity that is ultimately used in calculating DesiredVelocity."/>
    <NetworkProperty Type="AZ::Vector3" Name="VelocityFromImpulse"
                     Init="AZ::Vector3::CreateZero()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The component of the character's velocity due to an impulse."/>
    <NetworkProperty Type="AZ::Transform" Name="CurrentTransform"
                     Init="AZ::Transform::CreateIdentity()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The observed transform."/>
    <NetworkProperty Type="bool" Name="OverrideTransformForTick"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the transform will be set by OverrideTransform for one network tick."/>
    <NetworkProperty Type="bool" Name="OverrideRotationForTick"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the rotation will be set by OverrideTransform for one network tick."/>
    <NetworkProperty Type="AZ::Transform" Name="OverrideTransform"
                     Init="AZ::Transform::CreateIdentity()" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Transform to set the character to for one network tick."/>
    <NetworkProperty Type="float" Name="TopWalkSpeed"
                     Init="5.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Determines maximum walking speed of the character."/>
    <NetworkProperty Type="float" Name="StaminaPercentage"
                     Init="100.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The current stamina percentage of the character."/>
    <NetworkProperty Type="float" Name="SprintRegenRate"
                     Init="1.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="A coefficient which affects the rate at which stamina regenerates."/>
    <NetworkProperty Type="float" Name="SprintMaxTime"
                     Init="120.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The maximum consecutive sprinting time before beginning Sprint Cooldown. The underlying quantity of Stamina is set by this number."/>
    <NetworkProperty Type="float" Name="SprintCooldownTime"
                     Init="1.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The time required to wait before sprinting or using Stamina once Sprint Max Time has been reached or Stamina hits 0%."/>
    <NetworkProperty Type="float" Name="SprintCooldownTimer"
                     Init="0.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The cooldown timer for sprinting / stamina."/>
    <NetworkProperty Type="float" Name="JumpInitialVelocity"
                     Init="6.f" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="The velocity used when initiating the jump."/>
    <NetworkProperty Type="bool" Name="EnableNetworkAnimation"
                     Init="true" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="false"
                     IsPredictable="false" IsPublic="true"
                     Container="Object" ExposeToEditor="true"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Determines whether network animations are enabled."/>
    <NetworkProperty Type="bool" Name="IsSprinting"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is currently sprinting."/>
    <NetworkProperty Type="bool" Name="IsCrouchingDownMove"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is doing a crouching down movement."/>
    <NetworkProperty Type="bool" Name="IsCrouching"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is currently crouching."/>
    <NetworkProperty Type="bool" Name="IsStandingUpMove"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is doing a standing up movement."/>
    <NetworkProperty Type="bool" Name="IsJumpStarting"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is initiating jump."/>
    <NetworkProperty Type="bool" Name="IsFalling"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is falling or in the middle of a jump."/>
    <NetworkProperty Type="bool" Name="IsLanding"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is landing from a jump."/>
    <NetworkProperty Type="bool" Name="IsGrounded"
                     Init="false" ReplicateFrom="Authority"
                     ReplicateTo="Client" IsRewindable="true" IsPredictable="true"
                     IsPublic="true" Container="Object" ExposeToEditor="false"
                     ExposeToScript="true" GenerateEventBindings="true"
                     Description="Whether the character is grounded."/>

    <NetworkInput Type="float" Name="Forward" Init="0.f"/>
    <NetworkInput Type="float" Name="Back" Init="0.f"/>
    <NetworkInput Type="float" Name="Left" Init="0.f"/>
    <NetworkInput Type="float" Name="Right" Init="0.f"/>
    <NetworkInput Type="AZ::Vector3" Name="DesiredVelocity" Init="AZ::Vector3::CreateZero()"/>
    <NetworkInput Type="float" Name="Yaw" Init="0.f"/>
    <NetworkInput Type="float" Name="YawDelta" Init="0.f"/>
    <NetworkInput Type="float" Name="YawDeltaOvershoot" Init="0.f"/>
    <NetworkInput Type="AZ::Transform" Name="OverrideTransform" Init="AZ::Transform::CreateIdentity()"/>
    <NetworkInput Type="bool" Name="OverrideTransformForTick" Init="false"/>
    <NetworkInput Type="bool" Name="OverrideRotationForTick" Init="false"/>
    <NetworkInput Type="float" Name="Pitch" Init="0.f"/>
    <NetworkInput Type="float" Name="Sprint" Init="0.f"/>
    <NetworkInput Type="float" Name="Crouch" Init="0.f"/>
    <NetworkInput Type="float" Name="Jump" Init="0.f"/>

    <ArchetypeProperty Type="float" Name="EyeHeight" Init="1.6f" ExposeToEditor="true" Suffix="m" Description="The camera's Z offset with the respect to the parent character entity with the First Person Controller component."/>
    <ArchetypeProperty Type="AZStd::string" Name="WalkSpeedParamName" Init="&quot;WalkSpeed&quot;" ExposeToEditor="true" Description="Anim graph walk speed parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="SprintParamName" Init="&quot;Sprint&quot;" ExposeToEditor="true" Description="Anim graph sprint parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="CrouchParamName" Init="&quot;Crouch&quot;" ExposeToEditor="true" Description="Anim graph crouch parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="CrouchToStandParamName" Init="&quot;CrouchToStand&quot;" ExposeToEditor="true" Description="Anim graph crouch to stand parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="StandToCrouchParamName" Init="&quot;StandToCrouch&quot;" ExposeToEditor="true" Description="Anim graph stand to crouch parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="JumpStartParamName" Init="&quot;JumpStart&quot;" ExposeToEditor="true" Description="Anim graph jump start parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="FallParamName" Init="&quot;Fall&quot;" ExposeToEditor="true" Description="Anim graph fall parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="LandParamName" Init="&quot;Land&quot;" ExposeToEditor="true" Description="Anim graph jump land parameter name."/>
    <ArchetypeProperty Type="AZStd::string" Name="GroundedParamName" Init="&quot;Grounded&quot;" ExposeToEditor="true" Description="Anim graph grounded parameter name."/>
</Component>
